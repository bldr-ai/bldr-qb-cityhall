import{StrictMode as K}from"react";import{createRoot as M}from"react-dom/client";import{useState as c,useEffect as I}from"react";import{useEffect as N,useRef as A}from"react";var x=typeof window.GetParentResourceName!=="function",y={open:{licenses:[{id:"driver",label:"Driver License",price:50,description:"Required to drive vehicles"},{id:"id_card",label:"ID Card",price:25,description:"Official identification"},{id:"weapon",label:"Weapon License",price:150,description:"Required to carry firearms"}],jobs:[{id:"news",label:"News Reporter",description:"Report on breaking news events"},{id:"trucker",label:"Trucker",description:"Transport cargo across the map"},{id:"taxi",label:"Taxi Driver",description:"Provide transportation services"},{id:"tow",label:"Tow Truck Driver",description:"Recover and tow vehicles"},{id:"garbage",label:"Garbage Collector",description:"Collect waste from the city"},{id:"bus",label:"Bus Driver",description:"Operate public bus routes"}]}};function E(r,o){window.dispatchEvent(new MessageEvent("message",{data:{action:r,...o}}))}function h(r,o){let a=A(o);N(()=>{a.current=o},[o]),N(()=>{function s(i){let d=i.data||{};if(d.action===r){let v=d.data!==void 0?d.data:d;a.current(v)}}return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[r])}async function p(r,o={}){if(x){let i=y[r];if(i!==void 0)return i;return console.warn(`[Debug] No mock for '${r}'. Add to debugData.`),{}}let a=window.GetParentResourceName();return(await fetch(`https://${a}/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json()}if(x)setTimeout(()=>E("open",y.open),100);import{X as R,FileText as B,Briefcase as H,Home as $,ArrowRight as k}from"lucide-react";import{jsx as e,jsxs as l,Fragment as F}from"react/jsx-runtime";function g(){let r=typeof window.GetParentResourceName!=="function",[o,a]=c(r),[s,i]=c("welcome"),[d,v]=c([]),[u,S]=c([]),[n,b]=c(null),[f,J]=c(1);h("open",(t)=>{v(t.licenses||[]),S(t.jobs||[]),J(t.hallIndex||1),a(!0),i("welcome")}),h("close",()=>{a(!1)});let w=async()=>{await p("close")},L=async(t)=>{b(t.id);try{await p("purchaseLicense",{license:t.id,hallIndex:f})}catch(m){console.error("Failed to purchase license:",m)}finally{b(null)}},P=async(t)=>{b(t.id);try{await p("applyJob",{job:t.id,hallIndex:f})}catch(m){console.error("Failed to apply for job:",m)}finally{b(null)}};if(I(()=>{let t=(m)=>{if(m.key==="Escape"&&o)w()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]),!o)return e(F,{});return e("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center font-sans",children:l("div",{className:"w-[90vw] max-w-4xl h-[85vh] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-xl shadow-2xl border border-slate-700 flex flex-col overflow-hidden",children:[l("div",{className:"bg-gradient-to-r from-red-600 to-red-700 px-8 py-6 flex items-center justify-between border-b border-red-800",children:[e("h1",{className:"text-3xl font-bold text-white tracking-wider",children:"CITY HALL SERVICES"}),e("button",{onClick:w,className:"p-2 hover:bg-red-800 rounded-lg transition-colors",children:e(R,{className:"w-6 h-6 text-white"})})]}),s!=="welcome"&&l("div",{className:"bg-slate-800/50 px-8 py-4 flex items-center justify-between border-b border-slate-700",children:[l("div",{className:"flex items-center gap-2",children:[l("button",{onClick:()=>i("welcome"),className:"text-slate-400 hover:text-red-400 transition-colors flex items-center gap-1 font-semibold",children:[e($,{className:"w-4 h-4"}),"Home"]}),e("span",{className:"text-slate-600",children:"/"}),e("span",{className:"text-slate-300 font-semibold",children:s==="licenses"?"Civilian Services":"Public Jobs"})]}),e("button",{onClick:()=>i("welcome"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors",children:"â† Back"})]}),e("div",{className:"flex-1 overflow-y-auto p-8",children:s==="welcome"?l("div",{className:"h-full flex flex-col items-center justify-center",children:[l("div",{className:"text-center mb-12",children:[e("h2",{className:"text-5xl font-bold text-white mb-4",children:"Welcome to City Hall"}),e("p",{className:"text-slate-400 text-lg",children:"Select what you'd like to do today"})]}),l("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-2xl",children:[l("button",{onClick:()=>i("licenses"),className:"group bg-gradient-to-br from-slate-700 to-slate-800 rounded-xl p-8 border border-slate-600 hover:border-red-600 transition-all hover:shadow-2xl hover:shadow-red-600/30 cursor-pointer text-left",children:[l("div",{className:"flex items-start justify-between mb-4",children:[e("div",{className:"bg-red-600/20 p-4 rounded-lg group-hover:bg-red-600/30 transition-colors",children:e(B,{className:"w-8 h-8 text-red-400"})}),e(k,{className:"w-6 h-6 text-slate-600 group-hover:text-red-400 transition-colors translate-x-0 group-hover:translate-x-1"})]}),e("h3",{className:"text-2xl font-bold text-white mb-2",children:"Civilian Services"}),e("p",{className:"text-slate-400",children:"Request and purchase official documents including driver licenses, ID cards, and weapon permits."})]}),l("button",{onClick:()=>i("jobs"),className:"group bg-gradient-to-br from-slate-700 to-slate-800 rounded-xl p-8 border border-slate-600 hover:border-red-600 transition-all hover:shadow-2xl hover:shadow-red-600/30 cursor-pointer text-left",children:[l("div",{className:"flex items-start justify-between mb-4",children:[e("div",{className:"bg-red-600/20 p-4 rounded-lg group-hover:bg-red-600/30 transition-colors",children:e(H,{className:"w-8 h-8 text-red-400"})}),e(k,{className:"w-6 h-6 text-slate-600 group-hover:text-red-400 transition-colors translate-x-0 group-hover:translate-x-1"})]}),e("h3",{className:"text-2xl font-bold text-white mb-2",children:"Public Jobs"}),e("p",{className:"text-slate-400",children:"Apply for public sector employment opportunities across the city."})]})]})]}):s==="licenses"?l("div",{className:"w-full",children:[e("h2",{className:"text-3xl font-bold text-white mb-8",children:"Civilian Services"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.length>0?d.map((t)=>l("div",{className:"bg-gradient-to-br from-slate-700 to-slate-800 rounded-lg p-6 border border-slate-600 hover:border-red-600 transition-all hover:shadow-xl hover:shadow-red-600/20 group",children:[e("div",{className:"flex items-start justify-between mb-4",children:l("div",{className:"flex-1",children:[e("h3",{className:"text-xl font-bold text-white group-hover:text-red-400 transition-colors",children:t.label}),e("p",{className:"text-slate-400 text-sm mt-1",children:t.description})]})}),l("div",{className:"mt-6 pt-4 border-t border-slate-600 flex items-center justify-between",children:[l("span",{className:"text-2xl font-bold text-green-400",children:["$",t.price]}),e("button",{onClick:()=>L(t),disabled:n===t.id,className:`px-6 py-2 rounded-lg font-semibold transition-all ${n===t.id?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 active:scale-95"}`,children:n===t.id?"Processing...":"Purchase"})]})]},t.id)):e("div",{className:"col-span-full text-center py-12",children:e("p",{className:"text-slate-400 text-lg",children:"No licenses available"})})})]}):l("div",{className:"w-full",children:[e("h2",{className:"text-3xl font-bold text-white mb-8",children:"Public Jobs"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.length>0?u.map((t)=>l("div",{className:"bg-gradient-to-br from-slate-700 to-slate-800 rounded-lg p-6 border border-slate-600 hover:border-red-600 transition-all hover:shadow-xl hover:shadow-red-600/20 group",children:[e("div",{className:"flex items-start justify-between mb-4",children:l("div",{className:"flex-1",children:[e("h3",{className:"text-xl font-bold text-white group-hover:text-red-400 transition-colors",children:t.label}),e("p",{className:"text-slate-400 text-sm mt-1",children:t.description})]})}),e("div",{className:"mt-6 pt-4 border-t border-slate-600",children:e("button",{onClick:()=>P(t),disabled:n===t.id,className:`w-full px-6 py-3 rounded-lg font-semibold transition-all ${n===t.id?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 active:scale-95"}`,children:n===t.id?"Processing...":"Apply Now"})})]},t.id)):e("div",{className:"col-span-full text-center py-12",children:e("p",{className:"text-slate-400 text-lg",children:"No jobs available"})})})]})})]})})}import{jsx as C}from"react/jsx-runtime";var T=M(document.getElementById("root"));T.render(C(K,{children:C(g,{})}));
